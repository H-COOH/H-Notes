# H-Notes

H-Notes是一个纯前端的笔记系统，支持数据加密、目录结构、丰富的样式、插入图片和$\LaTeX$公式、即时预览等功能。

Demo：[notes.mzxr.top](https://notes.mzxr.top/)

---

## 数据加密

H-Notes会用`AES256`算法和一个`主密码`加密您的所有数据。每当您打开`index`页面时，系统会提示您输入`主密码`。系统会暂时储存您输入的密码，因此当您打开其它页面时，不需要重新输入密码。**注意：请保证任何时候有且仅有一个打开的`index`页面。**

当您第一次打开H-Notes时，系统会提示您设置`主密码`，您之后可以在`设置`中修改`主密码`。**注意：若您遗忘主密码，我们也无法恢复您的数据。**

---

## 目录结构

H-Notes支持通过文件夹来分类笔记。黑色标记表示文件夹，红色标记表示未归档的笔记，蓝色标记表示已归档的笔记。您可以点击文件夹以进入目录，或点击目录导航以切换目录。同一目录中不允许存在同名文件（笔记或图片）或文件夹，文件夹名称中不得含有`<`、`>`、`#`、`|`、`/`、` `字符。

### 右键的效果

- 空白区域
  - 新建笔记或文件夹
  - 批量剪切或删除笔记和文件夹
- 笔记
  - 查看、编辑或重命名笔记
  - 剪切笔记（并在别处粘贴，起到移动的效果）
  - 归档笔记（归档后仅允许查看、剪切或删除，且此操作不可恢复）
  - 删除笔记（移动笔记至回收站，若回收站中存在同名笔记，则会自动重命名笔记）
- 文件夹
  - 重命名文件夹
  - 剪切文件夹（并在别处粘贴，起到移动的效果）
  - 删除文件夹（也将同时删除所有子文件夹，其中的笔记会被移动至回收站）
- 回收站
  - 查看笔记
  - 剪切笔记（并在别处粘贴，起到恢复的效果）
  - 删除笔记（永久删除笔记，此操作不可恢复）
- 图库
  - 图库中的目录逻辑为`Root`/`图库`/`图片`
  - 图库目录
    - 空白区域
      - 上传图片（至`默认相册`）
      - 新建相册（请进入相册并上传图片，未包含任何图片的相册会被自动删除）
    - 相册（不包括`默认相册`）
      - 重命名相册
      - 删除相册（也将同时删除相册内所有图片，此操作不可恢复）
  - 图片目录
    - 空白区域
      - 上传图片（至该相册）
      - 批量剪切或删除图片
    - 图片
      - 查看或重命名图片
      - 剪切图片（并在其它相册中粘贴，起到移动的效果）
      - 删除图片（永久删除图片，此操作不可恢复）

---

## 笔记的渲染

笔记的渲染分为行内的`样式`与行间的`格式`。

### 样式

- `{#|标题}`：插入小标题，系统会据此自动生成目录
- `{/|文本}`：插入*斜体文本*
- `{*|文本}`：插入**粗体文本**
- `{?|文本}`：插入~~带有删除线的文本~~
- `{!|文本}`：插入<u>带有下划线的文本</u>
- `{/|(链接地址)链接文字}`：插入超链接
- `{s|}`：插入空格
- `{img|(p%)图库名/图片名}`：以`p%`的缩放插入`图库名`图库中的`图片名`图片
- `$#\LaTeX#`：插入$\LaTeX$公式

系统会自动补全您键入的样式。

### 格式

**插入无序列表**

> @o
> 
> item a
> 
> item b
> 
> @e

**插入有序列表**

> @n
> 
> item 1
> 
> item 2
> 
> @e

**插入区块引用**

> @q
> 
> text
> 
> text
> 
> @e

**隐藏区块内容**

> @x
> 
> text
> 
> text
> 
> @e

**分割线**

> @s

**空行**

> @

### 说明

`样式`与`格式`、`格式`与`格式`之间可以互相嵌套，**但`样式`必须包含在一行内，且不能互相嵌套**。

---

## 笔记的属性

笔记的`创建时间`为**您第一次打开该笔记的时间**，`修改时间`为您上一次保存该笔记的时间，系统会自动记录您编辑该笔记的总时长。

设置`只读`后将阻止您编辑和保存笔记，但不影响您打开编辑页面，您可以随时取消该设置。

键入密码并点击`保存`即可对该笔记进行单独加密，清空密码并点击`保存`即可取消单独加密。**注意：若您遗忘该密码，您将无法恢复该笔记。**

您可以在`样式`栏中对笔记设置自定义样式，设置方法与`CSS`相同，如`line-height:2;`。

---

## 设置页面

### 搜索笔记

H-Notes支持全文搜索，可以按照`笔记标题`、`笔记内容`、`创建时间`、`修改时间`查找笔记。**注意：被单独加密的笔记不在查找范围中。**

### 排序笔记

笔记和文件夹默认按创建时间从早到晚进行排序，但您也可以自由地对它们进行重新排序。排序笔记只需拖拽`排序`按钮进行排序即可，对文件夹的排序可以通过将其移动至别处再移动回原处实现。

### 自定义样式

此部分的配置**需要对`HTML`的一定了解**，但我们已经预置了常用的设置。

自定义样式赋予您根据需求调整笔记渲染方式的能力，一条自定义样式由`名称`、`参数1`、`参数2(可选)`组成，选中`参数`的复选框代表存在`参数2`，当您键入`{名称|参数1}`或`{名称|(参数2)参数1}`时，系统会根据您此处定义的`内容`进行渲染。将`$`替换为`参数1`的值，将`@`替换为`参数2`的值。例如当您在笔记中键入`{##|title}`时，它会被渲染为`<h2>title</h2>`。

### 备份数据

您可以导出H-Notes中的所有数据，并在别处重新导入，系统要求您在导出时对数据设置独立密码。**注意：此密码不同于`主密码`。**

**建议您定期备份数据。**
